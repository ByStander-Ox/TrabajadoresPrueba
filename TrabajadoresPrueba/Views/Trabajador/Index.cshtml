@model IEnumerable<TrabajadoresPrueba.Models.Trabajador>

@{
    ViewData["Title"] = "Listado de Trabajadores";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Listado de Trabajadores</h2>
        <a asp-action="Create" class="btn btn-primary">
            <i class="bi bi-person-plus"></i> Nuevo Trabajador
        </a>
    </div>

    <form method="get" class="mb-3">
        <div class="row g-2 align-items-center">
            <div class="col-auto">
                <label for="filtroSexo" class="col-form-label">Filtrar por sexo:</label>
            </div>
            <div class="col-auto">
                <select id="filtroSexo" name="filtroSexo" class="form-select" onchange="this.form.submit()">
                    <option value="">Todos</option>
                    @if (ViewBag.FiltroSexo == "Masculino")
                    {
                        <option value="Masculino" selected>Masculino</option>
                    }
                    else
                    {
                        <option value="Masculino">Masculino</option>
                    }

                    @if (ViewBag.FiltroSexo == "Femenino")
                    {
                        <option value="Femenino" selected>Femenino</option>
                    }
                    else
                    {
                        <option value="Femenino">Femenino</option>
                    }

                </select>
            </div>
        </div>
    </form>

    <table class="table table-hover align-middle text-center shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>Foto</th>
                <th>Nombres</th>
                <th>Apellidos</th>
                <th>Tipo Documento</th>
                <th>N° Documento</th>
                <th>Sexo</th>
                <th>Fecha Nacimiento</th>
                <th>Dirección</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var item in Model)
        {
            string colorFila = item.Sexo == "Masculino" ? "table-primary" : item.Sexo == "Femenino" ? "table-warning" : "";

            <tr class="@colorFila">
                <td>
                    @if (!string.IsNullOrEmpty(item.Foto))
                    {
                        <img src="@item.Foto" alt="Foto" width="60" height="60" class="rounded-circle border" />
                    }
                    else
                    {
                        <span class="text-muted">Sin foto</span>
                    }
                </td>
                <td>@item.Nombres</td>
                <td>@item.Apellidos</td>
                <td>@item.TipoDocumento</td>
                <td>@item.NumeroDocumento</td>
                <td>@item.Sexo</td>
                <td>@item.FechaNacimiento.ToString("dd/MM/yyyy")</td>
                <td>@item.Direccion</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-warning me-1">
                        <i class="bi bi-pencil-square"></i> Editar
                    </a>
                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-sm btn-danger">
                        <i class="bi bi-trash"></i> Eliminar
                    </a>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>
